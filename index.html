<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parsing</title>
</head>

<body>
  <span>Info:</span>
  <div class="info">
    ...
  </div>
  <div id="content">

  </div>
  <button>Press me</button>

  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">

    const btn = document.querySelector("button");
    const textField = document.querySelector(".info");

    function getDay(str) {
      if (str === '0') return 'Понедельник'
      if (str === '1') return 'Вторник'
      if (str === '2') return 'Среда'
      if (str === '3') return 'Четверг'
      if (str === '4') return 'Пятница'
      if (str === '5') return 'Суббота'
    }



    const LessonCard = (props) => {
      return (
        <div className="lesson-card">
          <h3 className="lesson__title"></h3>
          <div className="lesson__info">
            
          </div>
        </div>
      )
    }

    const DayItem = (props) => {
      return (
        <div className="lesson-day">
          <h2></h2>
          <LessonCard></LessonCard>
        </div>
      )
    }

    const DayList = (props) => {
      return (
        <div className="lesson-list">
          
        </div>
      )
    }

    btn.addEventListener("click", () => {
      (async function () {
        console.log("started fetching...");
        try {
          fetch("https://vicorp-node-server.herokuapp.com/", {
            method: "GET",
          })
            .then(response => {
              if (response.status !== 200) {
                console.log(
                  "Looks like there was a problem. Status Code: " + response.status
                );
                return;
              }
              response.json().then(data => {
                console.log(data);

                for (let key in data) {
                  //TO DO: REPLACE WITH REACT COMPONENTS
                  
                  let ul = document.createElement('ul');
                  let header = document.createElement('h2');
                  let div = document.createElement('div');
                  header.innerHTML = key + ': '
                  header.style.fontWeight = 'bold'
                  div.appendChild(header)
                  div.appendChild(ul)
                  div.classList.add('day')
                  document.body.appendChild(div)

                  data[key].forEach(lesson => {
                    let li = document.createElement('li');
                    let title = document.createElement('p');
                    let about = document.createElement('p');
                    let place = document.createElement('span');
                    title.innerHTML = `${lesson.index} пара, ${lesson.time} <br>`
                    about.innerHTML = `${lesson.type} - ${lesson.name}`
                    place.innerHTML = `${lesson.corps}; ${lesson.aud}`
                    li.appendChild(title)
                    li.appendChild(about)
                    ul.appendChild(li)
                  })
                  document.body.appendChild(ul)
                }
              });
            })
            .catch(function (err) {
              console.log("Fetch Error :-S", err);
            });
        } catch (e) {
          console.log("fetch failed...");
          console.log(e);
        }
        console.log(`ended fetching...`);
      })();
    });


    ReactDOM.render(
      <h1>Hello, world!</h1>,
      document.getElementById('content')
    );

  </script>

</body>

</html>